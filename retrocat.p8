pico-8 cartridge // http://www.pico-8.com
version 16
__lua__

--main
function _init()
    building_init()
    cat = cat_init()
    demolisher = demolisher_init()
end

function _update()
    building_update()
    cat_update(cat)
    demolisher_update(demolisher)
end

function _draw()
    palt(0, false)
    bg_draw()
    bulding_draw()
    cat_draw(cat)
    demolisher_draw(demolisher)
end

-->8
-- cat
function cat_init()
    return {
        x = 64,
        y = 24,
        spr_flip = false
    }
end

function cat_update(c)
    if(btn(1)) then
        c.x += 1
        c.spr_flip = false
    elseif(btn(0)) then
        c.x -= 1
        c.spr_flip = true
    end

    if(c.x > 124) c.x = 124
    if(c.x < 4) c.x = 4
end

function cat_draw(c)
    palt(7, true)
    spr(1, c.x - 4, c.y - 8, 1, 1, c.spr_flip)
    palt(7, false)
end

-->8
-- building
function building_init()
end

function building_update()
end

function bulding_draw()
    -- building
    rect(70,50,110,96,0)
    -- gauge
    rectfill(75,45,105,47,8)
end

-->8
-- demolisher
function demolisher_init()
    return {
        x = 20,
        y = 96,
    }
end

function demolisher_update(d)
end

function demolisher_draw(d)
    spr(3, d.x-8, d.y-16, 2, 2)
end

-->8
-- background
function bg_draw()
    rectfill(0,0,128,128,7)
    --ground
    rectfill(0,96,128,96,0)
    --scaffolding
    rectfill(0,24,128,25,0)
end

__gfx__
00000000777777770000000077777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000000077777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700777077070000000077777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000777000070000000077777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000707000070000000077777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700700000070000000077770000000077770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000770000070000000077770777707707770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000770777070000000077770777700770770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000077770777770777070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000077770777777000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000077770777777777070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000077770077777777070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000077770077777777070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000077700000000000770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000077707777777777070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000077700000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
